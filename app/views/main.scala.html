@import play.api.i18n.Messages
@import play.api.mvc.RequestHeader
@import play.twirl.api.Html
@import org.webjars.play.WebJarsUtil
@import controllers.AssetsFinder
@import views.html.helper._

@(title: String, userOpt: Option[models.User] = None)(content: Html)(implicit request: RequestHeader, messages: Messages, assets: AssetsFinder, webJarsUtil: WebJarsUtil)

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <meta name="description" content="A product to make payment easier.">
        <link rel="shortcut icon" type="image/png" href="@assets.path("images/favicon.png")">
        <title>@title</title>

        <link @{CSPNonce.attr} rel="stylesheet" href="@assets.path("styles/style.css")">

        <link @{CSPNonce.attr} rel="stylesheet" href="@assets.path("styles/main.css")">
    </head>


    <body>


        <div class="main-wrapper">

                <!-- partial:../../partials/_sidebar.html -->
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a href="#" class="sidebar-brand">

                    </a>
                    <div class="sidebar-toggler not-active">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
                <div class="sidebar-body">
                    <ul class="nav">
                        <li class="nav-item nav-category">Main</li>
                        <li class="nav-item">
                            <a href="@controllers.routes.ApplicationController.index()" class="nav-link">
                                <i class="link-icon" data-feather="box"></i>
                                <span class="link-title">Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item nav-category">Profile</li>
                        @userOpt.map { user =>
                        <li class="nav-item">
                            <a href="@controllers.routes.UserController.profile()" class="nav-link">
                                <i class="link-icon" data-feather="user"></i>
                                <span class="link-title">My profile</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="link-icon" data-feather="box"></i>
                                <span class="link-title">Wallet</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="collapse" href="#emails" role="button" aria-expanded="false" aria-controls="emails">
                                <i class="link-icon" data-feather="mail"></i>
                                <span class="link-title">Settings</span>
                                <i class="link-arrow" data-feather="chevron-down"></i>
                            </a>
                            <div class="collapse" id="emails">
                                <ul class="nav sub-menu">
                                    <li class="nav-item">

                                        <a class="nav-item nav-link" href="">@messages("change.password")</a>
                                        <a href="@controllers.routes.ChangePasswordController.view" class="nav-link">@messages("change.password")</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">Preferences</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">Settings</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        }.getOrElse {
                            <li class="nav-item">
                                <a class="btn btn-outline-primary btn-icon-text" href="@controllers.routes.SignInController.view">
                                    <i class="btn-icon-prepend" data-feather="log-in"></i>
                                    @messages("sign.in")
                                </a>
                            </li>
                        }
                    </ul>
                </div>
            </nav>
                <!-- partial -->

            <div class="page-wrapper">

                    <!-- partial:../../partials/_navbar.html -->
                <nav class="navbar">
                    <a href="#" class="sidebar-toggler">
                        <i data-feather="menu"></i>
                    </a>
                    <div class="navbar-content">

                        <ul class="navbar-nav">
                        <li class="nav-item">
                            <a href="@controllers.routes.ApplicationController.index"
                            class="noble-ui-logo d-inline align-content-center">Malabar <span> Online</span></a>
                        </li>
                        </ul>
                        <ul class="navbar-nav">
                            @userOpt.map { user =>

                            <li class="nav-item dropdown nav-profile">

                                <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <img src="@user.avatarURL.getOrElse(assets.path("images/silhouette.png"))" alt="profile">
                                    <span class="font-weight-medium ml-1 mr-1 d-none d-md-inline-block">@user.name</span>
                                </a>
                                <div class="dropdown-menu" aria-labelledby="profileDropdown">
                                    <div class="dropdown-header d-flex flex-column align-items-center">
                                        <div class="figure mb-3">
                                            <img src="@user.avatarURL.getOrElse(assets.path("images/silhouette.png"))" alt="">
                                        </div>
                                        <div class="info text-center">
                                            <p class="name font-weight-bold mb-0">@user.name</p>
                                            <p class="email text-muted mb-3">@user.email</p>
                                        </div>
                                    </div>
                                    <div class="dropdown-body">
                                        <ul class="profile-nav p-0 pt-3">
                                            <li class="nav-item">
                                                <a href="@controllers.routes.UserController.profile()" class="nav-link">
                                                    <i data-feather="user"></i>
                                                    <span>Profile</span>
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="@controllers.routes.ApplicationController.signOut" class="nav-link">
                                                    <i data-feather="log-out"></i>
                                                    <span>@messages("sign.out")</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </li>

                            }.getOrElse {

                            <li class="nav-item">
                                <a class="btn btn-outline-primary btn-icon-text" href="@controllers.routes.SignUpController.view">
                                    <i class="btn-icon-prepend" data-feather="check-square"></i>
                                    @messages("sign.up")
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="btn btn-primary btn-icon-text" href="@controllers.routes.SignInController.view">
                                    <i class="btn-icon-prepend" data-feather="log-in"></i>
                                    @messages("sign.in")
                                </a>
                            </li>
                            }


                        </ul>
                    </div>
                </nav>
                    <!-- partial -->

                <div class="page-content">
                    <div class="starter-template row">
                        @request.flash.get("error").map { msg =>
                            <div class="col-md-6 col-md-offset-3 alert alert-danger">
                                <a href="#" class="close" data-dismiss="alert">&times;</a>
                                <strong>@messages("error")</strong> @msg
                            </div>
                        }
                        @request.flash.get("info").map { msg =>
                            <div class="col-md-6 col-md-offset-3 alert alert-info">
                                <a href="#" class="close" data-dismiss="alert">&times;</a>
                                <strong>@messages("info")</strong> @msg
                            </div>
                        }
                        @request.flash.get("success").map { msg =>
                            <div class="col-md-6 col-md-offset-3 alert alert-success">
                                <a href="#" class="close" data-dismiss="alert">&times;</a>
                                <strong>@messages("success")</strong> @msg
                            </div>
                        }
                    </div>

                    @content

                </div>

                    <!-- partial:../../partials/_footer.html -->
                <footer class="footer d-flex flex-column flex-md-row align-items-center justify-content-between">
                    <p class="text-muted text-center text-md-left">Copyright Â© 2021 <a href="https://www.nobleui.com" target="_blank">NobleUI</a>. All rights reserved</p>
                    <p class="text-muted text-center text-md-left mb-0 d-none d-md-block">Handcrafted With <i class="mb-1 text-primary ml-1 icon-small" data-feather="heart"></i></p>
                </footer>
                    <!-- partial -->

            </div>
        </div>



        <script @{CSPNonce.attr} src="@assets.path("javascripts/core.js")"></script>
        <script @{CSPNonce.attr} src="@assets.path("javascripts/feather.min.js")"></script>
        <script @{CSPNonce.attr} src="@assets.path("javascripts/template.js")"></script>

    </body>
</html>
